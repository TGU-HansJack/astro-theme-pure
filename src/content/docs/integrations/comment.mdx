---
title: '评论系统'
description: '页面底部的评论系统'
order: 3
---

import { Aside } from 'astro-pure/user'

## Waline评论系统

<Aside>
  本主题已集成Waline评论系统。你可以在文件 `src/site.config.ts` 的
  `integrationConfig.waline` 中配置它。
</Aside>

主题的评论、阅读统计、点赞等功能均由[Waline](https://waline.js.org/)提供。

### 移除

如果你有某些原因要移除评论系统，或只是想了解如何更换到其他评论系统，本节可能对你有帮助。但如果你想了解如何配置它，可以跳过本节。

通过以下步骤移除：

1. 在 `src/site.config.ts` 中将 `enable` 设置为 `false`。

   ```ts title="src/site.config.ts"
   export const integ: IntegrationUserConfig = {
     // ...
     waline: {
       enable: false // [!code highlight]
     }
   }
   ```

2. 移除依赖 `@waline/client`:

   ```shell
   bun remove @waline/client
   ```

3. 移除文件夹 `src/components/waline`。

4. 在这些布局中移除相关代码:
   - `src/layouts/CommonPage.astro`
   - `src/layouts/BlogPost.astro`

5. 移除为之前编辑的布局在这些文件中的相关配置，如 `comment` 或 `view`:
   - `src/pages/about/index.astro`
   - `src/pages/links/index.astro`
   - `src/pages/projects/index.astro`
   - 其他博客文章的frontmatter配置（如果存在）

### 部署

你可以参考其文档进行配置，推荐使用[Vercel](https://vercel.com/) + [Supabase](https://supabase.com/)组合。

### 配置

然后你可以在 `integrationConfig.server` 中配置Waline评论系统。

```ts title="src/site.config.ts"
export const integ: IntegrationUserConfig = {
  // ...
  waline: {
    enable: true,
    // 服务链接
    server: 'https://astro-theme-pure-waline.arthals.ink/', // [!code highlight]
    // 参考 https://waline.js.org/en/guide/features/emoji.html
    emoji: ['bmoji', 'weibo'],
    // 参考 https://waline.js.org/en/reference/client/props.html
    additionalConfigs: {
      pageview: true,
      comment: true
      // ...
    }
  }
}
```

### 使用

你可以在 `.astro` 或 `.mdx` 文件中手动调用它。

```jsx
import { Comment } from '@/components/waline'

// prettier-ignore
<Comment />
```

渲染:

import { Comment } from '@/components/waline'

<Comment />